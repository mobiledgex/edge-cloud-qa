<!DOCTYPE html>
<html>
<div>
<h3 style="text-align: left; font-size: 1.5vw;"><span style="background-color: #000000; color: #84de02;"><strong>Jmeter Apache2 Using Internal Port: <span style="color: #ffffff;">8086</span></strong></span></h3>
<h1 style="text-align: center;"><span style="background-color: #000000;"><span style="color: #ffffff;">Mobiledge<span style="color: #99cc00;">X</span>&nbsp;</span></span></h1>
</div>
<div>
<div>
<h2 style="text-align: left; font-size: 1.5vw;"><span style="background-color: #000000; color: #00ccff;">jmeter stress-ng curl netcat dd-disk</span></h2>
</div>
</div>
<div>
<div>
<h1 style="text-align: left; font-size: .85vw;">jmeter has a jmx file setup for active connections and is using J-props so commands can be sent directly: Help Info:</h1>
<p style="text-align: left; font-size: .75vw;">Help Info:<br /> Eenter 7 args filename.jmx -Jdelay -Jloops -Jusers -Jramptime -Jport -Jdomain<br /> ./jmeterbash.sh $1 $2 $3 $4 $5 $6 $7 &lt;===== customize the 7 arguments as follows <br /> ./jmeterbash.sh jmeterx8086.jmx 900 35 5 5 8076 clusterdallask8s.automationdallascloudlet.packet.mobiledgex.net &lt; == bash values only<br /> ./jmeterbash.sh &lt; jmx file &gt; &lt; delay ms &gt; &lt; seconds/loops &gt; &lt; users &gt; &lt; ramptime &gt; &lt; http port &gt; &lt; http url &gt; &lt; === $1 $2 $3 $4 $5 $6 $7 value info<br /> jmeter -n -t /jmeterx8076.jmx -Jdelay=900 -Jloops=5 -Jusers=5 -Jramptime=5 -Jport=8076 -Jdomain=clusterdallask8s.automationdallascloudlet.packet.mobiledgex.net &lt; == jmeter with the J vars<br /> <br /> This bash file is using jmeter with input args with a modified jmx file to make sending mcctl commands<br /> easier or run predefined tests that can have some tweeks on the fly using -J substitute variables setup in jmx file.</p>
<p style="text-align: left; font-size: .75vw;">MCCTL examples of accesscloudlet and runcommand if you know your cluster and app you crated you can send --bash -c command to run anything.</p>
 <p style="text-align: left; font-size: .75vw;">If you know your app name you can open a shell to your pod to make edits with this:
<p style="text-align: left; font-size: .75vw;">mcctl --addr https://console-qa.mobiledgex.net:443 --skipverify accesscloudlet cloudlet=automation-qa2-vcd-01 region=US cloudlet-org=packet node-type=dedicatedrootlb node-name=clusterdallask8s.automationDallasCloudlet.packet.mobiledgex.net command="export KUBECONFIG=clusterdallask8s.packet.kubeconfig;kubectl exec -it --namespace\=\"default\" \$(kubectl get pods | grep 'jmeterplus8086' | cut -d ' ' -f1) -- bash"</p>
root@jmeterplus8086501-deployment-6cc549655-4zm6j:/#
<div>
<div>
<p style="text-align: left; font-size: .75vw;">MCCTL runcommand runcommand app-org=automation_dev_org  appname=jmeterk8splus  appvers=5.0.1  cloudlet-org=packet  cloudlet=automationDallasCloudlet  cluster=clusterdallask8s region=US command="./jmeterbash.sh jmeterx8086.jmx 900 50 35 10 8076 clusterdallask8s.automationdallascloudlet.packet.mobiledgex.net"  Use this format to send execute traffic</p>
<div>
<div>
<p style="text-align: left; font-size: .75vw;">Send a command to your container if it has jmeter or another app installed just send:<br>
<p style="text-align: left; font-size: .75vw;"> mcctl --addr https://console-qa.mobiledgex.net:443 --skipverify accesscloudlet cloudlet=automation-qa2-vcd-01 region=US cloudlet-org=packet node-type=dedicatedrootlb node-name=alertk8sclustervcd2.automation-qa2-vcd-01.packet.mobiledgex.net command="export KUBECONFIG=alertk8sclustervcd2.packet.kubeconfig;kubectl exec -it --namespace\=\"default\" \$(kubectl get pods | grep 'jmeterk8sapp8086' | cut -d ' ' -f1) -- bash -c 'stress-ng --cpu 1 --io 1 --vm 2 --vm-bytes 128M --metrics-brief --timeout 3'"
<p style="text-align: left; font-size: .75vw;">You can also vssh to your pod or node</p>
<p style="text-align: left; font-size: .75vw;">vssh -j ubuntu@139.178.87.229 ubuntu@10.101.1.101</p>
<p style="text-align: left; font-size: .75vw;">ubuntu@mex-k8s-node-1-automation-qa2-vcd-01-alertk8sclustervcd2-automa:~$ docker exec -it $(docker ps -a | grep "jmeterk8sapp8086" | cut -d ' ' -f1) ls -GFlash | grep bash<br /> 16K -rw-r--r-- 1 root 16K Aug 10 03:06 .jmeterbash.sh.swp<br /> 8.0K -rwxr-xr-x 1 root 4.9K Aug 9 05:42 diskbash.sh*<br /> 4.0K -rwxr-xr-x 1 root 2.8K Aug 6 07:53 diskbash2.sh*<br /> 4.0K -rwxr-xr-x 1 root 2.8K Aug 6 16:43 diskbash_bak.sh*<br /> 12K -rwxr-xr-x 1 root 8.2K Aug 10 03:05 jmeterbash.sh*<br /> 4.0K -rwxr-xr-x 1 root 1.3K Aug 8 23:15 jmeterbash.sh.bak*<br /> 4.0K -rwxr-xr-x 1 root 3.6K Aug 9 02:18 jmxacbash.sh*<br /> 4.0K -rwxr-xr-x 1 root 1.6K Aug 4 20:39 stresscombobash.sh*<br /> 4.0K -rwxr-xr-x 1 root 3.0K Aug 10 02:54 stressngbash.sh*<br /> ubuntu@mex-k8s-node-1-automation-qa2-vcd-01-alertk8sclustervcd2-automa:~$</p>
</div>
</div>
